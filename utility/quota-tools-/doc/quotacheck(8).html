<HTML>
<HEAD>
<TITLE>quotacheck(8) manualpage</TITLE>
<!-- OWNER_NAME="Marco van Wieringen, OpenWorld System Management" -->
<!-- OWNER_INFO="The OpenWorld Foundation, The Netherlands" -->
<LINK REV=MADE HREF="mailto:mvw@planets.elm.net">
</HEAD>
<BODY>
<H1>NAME</H1>
quotacheck - scan a file system for disk usages
<H1>SYNOPSIS</H1>
<B>quotacheck</B>
[-g] [-u] [-v] -a
<BR>
<B>quotacheck</B>
[-g] [-u] [-v] filesys ...
<H1>DESCRIPTION</H1>
<B>Quotacheck</B>
performs a filesystems scan for usage of files and directories, used
by either user or group. The output is the quota file for the 
corresponding filesystem. By default the names for these files are:
<UL>
<LI>
A user scan: 
<B>quota.user</B>
<LI>
A group scan:
<B>quota.group</B>
</UL>
<P>
The resulting file consist of a
<B>struct dqblk</B>
for each possible id up to the highest existing uid or gid and contains the
values for the disk file and block usage and possibly excess time for these
values. ( for definitions of
<B>struct dqblk</B>
see
<B>&ltlinux/quota.h&gt</B>
)
<P>
<B>Quotacheck</B>
should be run each time the system boots and mounts non-valid file systems.
This is most likely to happen after a system crash.
<P>
The speed of the scan decrease with the amount of directories increasing.
The time needed doubles when disk usage is doubled as well. A 100 MB partition
used for 94% is scanned in 1 minute, the same partition used for 50% is
done in 25 seconds.
<H1>OPTIONS</H1>
<UL>
<LI>
<B>-v</B>
<BR>
This way the program will give some usefull information about what it is
doing, plus some fancy stuff.
<LI>
<B>-d</B>
<BR>
This means debug. It will result in a lot of information which can be used
in debugging the program. The output is very verbose and the scan
will not be fast.
<LI>
<B>-u</B>
<BR>
This flag tells the program to scan the disk and to count the files and
directories used by a certain uid. This is the default action.
<LI>
<B>-g</B>
<BR>
This flag forces the program to count the the files and directories
used by a certain gid.
</UL>
<H1>NOTE</H1>
<B>Quotacheck</B>
should only be run as Super User. Non-privilidged users are presumably not allowed
to read all the directories on the given file system.
<H1>FILES</H1>
<B>quota.user</B>
located at the filesystem root with user quotas
<BR>
<B>quota.group</B>
located at the filesystem root with group quotas
<BR>
<B>/etc/fstab</B>
to find filesystem names and locations
<H1>SEE ALSO</H1>
<A HREF="quota(1).html">quota (1)</A>,
<A HREF="quotactl(2).html">quotactl (2)</A>,
<A HREF="fstab(5).html">fstab (5)</A>,
<A HREF="edquota(8).html">edquota (8)</A>,
<A HREF="quotaon(8).html">quotaon (8)</A>,
<A HREF="repquota(8).html">repquota (8)</A>
</BODY>
</HTML>
